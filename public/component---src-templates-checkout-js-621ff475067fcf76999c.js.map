{"version":3,"sources":["webpack://gatsby-starter-default/./src/components/checkout/FormRegister.js","webpack://gatsby-starter-default/./src/components/checkout/ResultPrice.js","webpack://gatsby-starter-default/./src/components/checkout/payment.js","webpack://gatsby-starter-default/./src/components/checkout/paymentGateways.js","webpack://gatsby-starter-default/./src/components/checkout/pay.js","webpack://gatsby-starter-default/./src/templates/checkout.js"],"names":["state","useContext","StateContext","sumPrice","items","reduce","acc","curr","count","price","console","log","className","length","IndexPage","firstName","lastName","phone","city","address1","handleInputChange","event","target","value","name","setState","handleSubmit","preventDefault","props","setStep","window","localStorage","setItem","JSON","stringify","parse","getItem","componentDidMount","payment","this","render","onSubmit","id","required","type","placeholder","onChange","React","GET_GATEWAYS","gql","useQuery","loading","error","data","message","paymentGateways","edges","map","item","node","title","CONTACT_MUTATION","useState","payMetodValue","setPayMetodValue","mutation","createOrder","variables","clientMutationId","lineItems","variationId","databaseId","quantity","paymentMethod","paymentMethodTitle","selectedIndex","text","size","navigate","Link","to","onClick","xmlns","width","height","viewBox","fill","d","pageContext","cart","step","page","ResultPrice","info","classBox","homeBtn"],"mappings":"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","file":"component---src-templates-checkout-js-621ff475067fcf76999c.js","sourcesContent":["import React from 'react';\r\n//import {Link} from \"gatsby\";\r\n//import { DispatchContext } from '../components/layout'\r\nimport { Step } from '../../templates/checkout'\r\n\r\nfunction FormRegister() {\r\n\r\n    return (\r\n        <form action=\"\" className=\"mt-3 mb-3\">\r\n            <div className=\"input-group\">\r\n                <input required placeholder=\"Имя\" name=\"name\" className=\"input\" type=\"text\"/>\r\n            </div>\r\n            <div className=\"input-group\">\r\n                <input required placeholder=\"Фамилия\" name=\"lastname\" className=\"input\" type=\"text\"/>\r\n            </div>\r\n            <div className=\"input-group\">\r\n                <input required placeholder=\"Ваш телефон\" name=\"phone\" className=\"input\" type=\"phone\"/>\r\n            </div>\r\n            <div className=\"input-group\">\r\n                <input required placeholder=\"Ваш email\" name=\"email\" className=\"input\" type=\"email\"/>\r\n            </div>\r\n            <div className=\"input-group\">\r\n                <input required placeholder=\"Ваш пароль\" name=\"password\" className=\"input\" type=\"password\"/>\r\n            </div>\r\n            <button onClick={()=>Step(2)} className=\"btn style-3 w100\">зарегистрироваться</button>\r\n        </form>\r\n    )\r\n}\r\nexport default FormRegister\r\n\r\n\r\n","import React, {useContext} from \"react\";\r\nimport {Link} from \"gatsby\";\r\nimport GetInfoResult from \"../InfoBox\";\r\nimport { StateContext } from '../global/layout'\r\nimport \"./checkout.css\"\r\nexport default () => {\r\n\r\n    const state = useContext(StateContext)\r\n\r\n    function sumPrice() {\r\n        return state.items?state.items.reduce((acc, curr) => acc + curr.count*curr.price, 0):0\r\n    }\r\n\r\n    console.log(state);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"mb-3\">\r\n                <div className=\"resultPrice mb-3\">\r\n                    {state.items && state.items.length>0 && (\r\n                        <>\r\n                            <div className=\"pb-3\">\r\n                                <strong>ВАШ ЗАКАЗ:</strong>\r\n                            </div>\r\n\r\n                            <div className=\"row  pb-3 d-flex align-items-center\">\r\n                                <div className=\"col\"><span>Товаров на сумму:</span></div>\r\n                                <div className=\"col-auto\">\r\n                                    <div className=\"box-result\">{sumPrice()} грн</div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"row line-bottom  pb-3 d-flex align-items-center\">\r\n                                <div className=\"col\"><span>Ваша скидка:</span></div>\r\n                                <div className=\"col-auto\">\r\n                                    <div className=\"box-result\">0 грн</div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"row  pt-3 d-flex align-items-center\">\r\n                                <div className=\"col\"><span>Сумма к оплате:</span></div>\r\n                                <div className=\"col-auto\">\r\n                                    <div className=\"box-result\">{sumPrice()} грн</div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\n\r\n","import React from \"react\"\r\n\r\n\r\n\r\n\r\nexport default class IndexPage extends React.Component {\r\n\r\n    state = {\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        phone: \"\",\r\n        city: \"\",\r\n        address1:  \"\",\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        const payment = typeof window !== 'undefined' && JSON.parse( localStorage.getItem('payment') );\r\n        if ( payment ) {\r\n            this.setState({\r\n                firstName: payment.firstName || \"\",\r\n                lastName: payment.lastName || \"\",\r\n                phone: payment.phone || \"\",\r\n                city: payment.city || \"\",\r\n                address1: payment.address1 || \"\",\r\n            })\r\n        }\r\n    }\r\n\r\n    handleInputChange = event => {\r\n\r\n        const target = event.target\r\n        const value = target.value\r\n        const name = target.name\r\n\r\n        this.setState({\r\n            [name]: value,\r\n        })\r\n    }\r\n\r\n    handleSubmit = event => {\r\n        event.preventDefault()\r\n        //alert(`Welcome ${this.state.firstName} ${this.state.lastName}!`)\r\n        this.props.setStep(3);\r\n\r\n        ( typeof window !== 'undefined' ) && localStorage.setItem('payment', JSON.stringify(this.state) );\r\n        console.log('payment', ( typeof window !== 'undefined' ) && JSON.parse( localStorage.getItem('payment') ) )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={this.handleSubmit}>\r\n\r\n                <div className=\"box-checkout-title text-center\">\r\n                    <strong>получатель</strong>\r\n                </div>\r\n                <div id=\"payment\" className=\"payment line-bottom pt-3 pb-3\">\r\n                    <div className=\"input-group\">\r\n                        <input\r\n                            required\r\n                            type=\"text\"\r\n                            name=\"firstName\"\r\n                            placeholder=\"Имя\"\r\n                            className={this.state.firstName.length == 0 ? ( `input error` ) : ( `input valid` ) }\r\n                            value={this.state.firstName}\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                        <input\r\n                            required\r\n                            type=\"text\"\r\n                            name=\"lastName\"\r\n                            placeholder=\"Фамилия\"\r\n                            className=\"input\"\r\n                            value={this.state.lastName}\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                        <input\r\n                            required\r\n                            type=\"phone\"\r\n                            name=\"phone\"\r\n                            placeholder=\"Ваш телефон\"\r\n                            className=\"input\"\r\n                            value={this.state.phone}\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"box-checkout-title text-center pt-3\">\r\n                    <strong>адрес получения</strong>\r\n                </div>\r\n                <div id=\"delivery\" className=\"delivery pt-3 pb-3\">\r\n                    <div className=\"input-group\">\r\n                        <input\r\n                            required\r\n                            type=\"text\"\r\n                            name=\"city\"\r\n                            placeholder=\"Город\"\r\n                            className=\"input\"\r\n                            value={this.state.city}\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                        <input\r\n                            required\r\n                            type=\"text\"\r\n                            name=\"address1\"\r\n                            placeholder=\"Выберите отделение новой почты\"\r\n                            className=\"input\"\r\n                            value={this.state.address1}\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"input-group\">\r\n                        <button className=\"btn style-3 w100\">\r\n                            Продолжить\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n            </form>\r\n        )\r\n    }\r\n}\r\n//\r\n// <form action=\"\">\r\n//     <div className=\"box-checkout-title text-center\">\r\n//         <strong>получатель</strong>\r\n//     </div>\r\n//     <div id=\"payment\" className=\"payment line-bottom pt-3 pb-3\">\r\n//         <div className=\"input-group\">\r\n//             <input required placeholder=\"Имя\" name=\"name\" className=\"input\" type=\"text\"/>\r\n//         </div>\r\n//         <div className=\"input-group\">\r\n//             <input required placeholder=\"Фамилия\" name=\"lastname\" className=\"input\" type=\"text\"/>\r\n//         </div>\r\n//         <div className=\"input-group\">\r\n//             <input required placeholder=\"Ваш телефон\" name=\"phone\" className=\"input\" type=\"phone\"/>\r\n//         </div>\r\n//     </div>\r\n//     <div className=\"box-checkout-title text-center pt-3\">\r\n//         <strong>адрес получения</strong>\r\n//     </div>\r\n//     <div id=\"delivery\" className=\"delivery pt-3 pb-3\">\r\n//         <div className=\"input-group\">\r\n//             <input required placeholder=\"Город\" name=\"city\" className=\"input\" type=\"text\"/>\r\n//         </div>\r\n//         <div className=\"input-group\">\r\n//             <input required placeholder=\"Выберите отделение новой почты\" name=\"newmail\" className=\"input\" type=\"text\"/>\r\n//         </div>\r\n//         <div className=\"input-group\">\r\n//             <button className=\"btn style-3 w100\" onClick={()=>Step(3)}>\r\n//                 Продолжить\r\n//             </button>\r\n//         </div>\r\n//     </div>\r\n// </form>","import React from \"react\"\r\n//import { StaticQuery, graphql } from \"gatsby\"\r\n//import gql from \"graphql-tag\";\r\n\r\nimport { gql, useQuery } from '@apollo/client';\r\n\r\nconst GET_GATEWAYS = gql`\r\n    query MyQuery {\r\n      paymentGateways(where: {all: false}) {\r\n        edges {\r\n          node {\r\n            id\r\n            title\r\n            description\r\n          }\r\n          cursor\r\n        }\r\n      }\r\n    }\r\n`;\r\n\r\n//\r\n// const PaymentGateways = gql`\r\n//     query MyQuery {\r\n//       paymentGateways(where: {all: false}) {\r\n//         edges {\r\n//           node {\r\n//             id\r\n//             title\r\n//             description\r\n//           }\r\n//           cursor\r\n//         }\r\n//       }\r\n//     }\r\n// `\r\n\r\n\r\nconst ComponentName = () => {\r\n    const { loading, error, data } = useQuery(GET_GATEWAYS);\r\n\r\n    if (loading) return '<option value=\"\">...Загрузка</option>';\r\n    if (error) return `<option value=\"\"> Error! ${error.message} </option>`;\r\n\r\n\r\n    ( typeof window !== 'undefined' ) && localStorage.setItem('paymentGateways', JSON.stringify( data.paymentGateways.edges ) );\r\n\r\n    return (\r\n        <>\r\n            <option value=\"\">Выберите способ оплаты</option>\r\n            {data.paymentGateways.edges.map(item => (\r\n                <option value={item.node.id}>\r\n                    {item.node.title}\r\n                </option>\r\n            ))}\r\n        </>\r\n    );\r\n}\r\nexport default ComponentName\r\n\r\n// const ComponentName = () => (\r\n//      <>\r\n//          <pre>{JSON.stringify(PaymentGateways, null, 40)}</pre>\r\n//      </>\r\n// )\r\n//\r\n// export default ComponentName","import React, {useState, useContext} from \"react\";\r\nimport gql from 'graphql-tag';\r\nimport { Mutation } from 'react-apollo';\r\nimport {Link, navigate, useStaticQuery} from \"gatsby\";\r\nimport {Step} from \"../../templates/checkout\"\r\nimport { StateContext } from '../global/layout'\r\nimport PaymentGateways from './paymentGateways'\r\n// lineItems:{productId: 210, quantity: 1}\r\n\r\n\r\n\r\nconst CONTACT_MUTATION = gql`\r\n    mutation createOrderMutation( $clientMutationId: String!, $firstName: String!,$lastName: String!, $phone: String!, $city: String!, $address1: String!, $lineItems: [LineItemInput], $paymentMethod: String!, $paymentMethodTitle: String! ){\r\n    createOrder(input: {clientMutationId: $clientMutationId, billing: {firstName: $firstName, lastName: $lastName, phone: $phone, city: $city, address1: $address1}, isPaid: false , lineItems: $lineItems, paymentMethod: $paymentMethod, paymentMethodTitle: $paymentMethodTitle }) {\r\n      clientMutationId \r\n      order {\r\n        id\r\n        billing {\r\n          firstName\r\n          lastName\r\n          phone\r\n          city\r\n          address1\r\n        }\r\n        paymentMethod\r\n        paymentMethodTitle\r\n      }\r\n      orderId\r\n    }\r\n  }\r\n`\r\n\r\n\r\n\r\nexport default (props) => {\r\n\r\n\r\n\r\n    // const P = useStaticQuery(graphql`\r\n    //    {\r\n    //       paymentGateways(where: {all: false}) {\r\n    //         edges {\r\n    //           node {\r\n    //             id\r\n    //             title\r\n    //             description\r\n    //           }\r\n    //           cursor\r\n    //         }\r\n    //       }\r\n    //     }\r\n    //   `)\r\n\r\n    const state = useContext(StateContext)\r\n\r\n    //const payment = typeof window !== 'undefined' && JSON.parse( localStorage.getItem('payment') );\r\n    //console.log('firstName', payment, payment.firstName );\r\n\r\n    //const [firstNameValue, setFirstNameValue] = useState( '' )\r\n\r\n    const [payMetodValue, setPayMetodValue] = useState( '' )\r\n\r\n\r\n    //const [selectedOption, setSelectedOption] = useState('');\r\n\r\n    return (\r\n        <>\r\n\r\n            {/*{*/}\r\n            {/*    console.log('PaymentGateway.edges', P)*/}\r\n            {/*}*/}\r\n\r\n            <div className=\"pay pt-3 pb-3\">\r\n\r\n                <Mutation mutation={CONTACT_MUTATION}>\r\n                    {(createOrder, { loading, error, data }) => (\r\n                        <React.Fragment>\r\n\r\n                            <form\r\n                                onSubmit={\r\n                                    async event => {\r\n                                        event.preventDefault()\r\n                                        props.setStep(3);\r\n                                        const payment = typeof window !== 'undefined' && JSON.parse( localStorage.getItem('payment') );\r\n                                        console.log('firstName', payment, payment.firstName );\r\n                                        createOrder({\r\n                                            variables: {\r\n                                                clientMutationId: 'Checkout',\r\n                                                //firstName: 'serega', // наніше було firstNameValue - тестував, все ок\r\n                                                //phone: '+380961530713',\r\n                                                firstName: payment.firstName,\r\n                                                lastName: payment.lastName,\r\n                                                phone: payment.phone,\r\n                                                city: payment.city,\r\n                                                address1: payment.address1,\r\n                                                //lineItems: '[' + [{variationId: 216, quantity: 1}, {variationId: 211, quantity: 2}].map(item => `{variationId: ${item.variationId}, quantity: ${item.quantity}}`).join(', ') + ']'\r\n                                                //lineItems: [{variationId: 216, quantity: 1}, {variationId: 211, quantity: 2}].map(item => `{variationId: ${item.variationId}, quantity: ${item.quantity}}`)\r\n                                                //lineItems: [{variationId: 216, quantity: 1}, {variationId: 211, quantity: 2}],\r\n                                                lineItems: state.items.map(item => (\r\n                                                    {variationId: item.databaseId, quantity: item.count }\r\n                                                )),\r\n                                                paymentMethod: payMetodValue.value,\r\n                                                paymentMethodTitle: payMetodValue[payMetodValue.selectedIndex].text,\r\n\r\n                                                //productId: productIdValue,\r\n                                                //product: ProductValue\r\n                                            }\r\n                                        })\r\n\r\n                                        typeof window !== 'undefined' && JSON.parse( localStorage.getItem('payment') );\r\n                                        console.log('payMetodValue.selectedIndex', payMetodValue.selectedIndex);\r\n                                        typeof window !== 'undefined' && localStorage.setItem('payMetodIndex', JSON.stringify(  payMetodValue.selectedIndex ) );\r\n                                    }\r\n                                }\r\n                            >\r\n\r\n\r\n                                {/*<input type=\"text\" id='firstNameInput' required*/}\r\n                                {/*placeholder=\"Ваше имя\" className=\"input\" value={firstNameValue}*/}\r\n                                {/*onChange={ event => { setFirstNameValue(event.target.value) } } />*/}\r\n\r\n                                {/*<input type=\"text\" id='PhoneInput' required maxLength=\"12\"*/}\r\n                                {/*       placeholder=\"Ваш телефон\" className=\"input\" value={PhoneValue}*/}\r\n                                {/*       onChange={event => {*/}\r\n                                {/*           setPhoneValue(event.target.value)*/}\r\n                                {/*       }}/>*/}\r\n\r\n                                {/*<input type=\"text\" id='PhoneInput' required maxLength=\"12\"*/}\r\n                                {/*       placeholder=\"Ваш товар\" className=\"input\" value={PhoneValue}*/}\r\n                                {/*       onChange={event => {*/}\r\n                                {/*           setPhoneValue(event.target.value)*/}\r\n                                {/*       }}/>*/}\r\n\r\n                                <div className=\"input-group\">\r\n                                    <select required size=\"1\" className=\"input\" name=\"payMetod\"\r\n                                    // value={payMetodValue}\r\n                                    // onChange={\r\n                                    //     event => {\r\n                                    //         setPayMetodValue(event.target.value)\r\n                                    //         console.log('setPayMetodValue(event.target.value)', setPayMetodValue(event) )\r\n                                    //     }\r\n                                    // }\r\n\r\n                                            onChange={event => {\r\n                                                setPayMetodValue(event.target)\r\n                                                console.log('payMetodValue', event.target.value, event.target.selectedIndex, event.target[event.target.selectedIndex].text)\r\n                                            }}\r\n\r\n                                    >\r\n                                        <PaymentGateways />\r\n                                    </select>\r\n\r\n                                    {/*<select*/}\r\n                                    {/*    name=\"payMetod\" id=\"payMetod\"*/}\r\n                                    {/*    onChange={event => {*/}\r\n                                    {/*        setPayMetodValue(event.target.value)*/}\r\n                                    {/*        console.log('payMetodValue', event.target.value)*/}\r\n                                    {/*    }}*/}\r\n                                    {/*>*/}\r\n                                    {/*    <option value=\"\">Выберите способ оплаты</option>*/}\r\n                                    {/*    <option value=\"2\">Выберите способ оплаты 2</option>*/}\r\n                                    {/*    <option value=\"3\">Выберите способ оплаты 3</option>*/}\r\n                                    {/*</select>*/}\r\n\r\n\r\n\r\n                                    {/*<label htmlFor=\"payMetod_1\">*/}\r\n                                    {/*    <input type=\"radio\" id='payMetod_1' name=\"payMetod\" required*/}\r\n                                    {/*           className=\"input\" value=\"payMetod_1\"*/}\r\n                                    {/*           onChange={event => {*/}\r\n                                    {/*               setPayMetodValue(event.target.value)*/}\r\n                                    {/*               console.log('payMetodValue1', event.target.value)*/}\r\n                                    {/*           }}*/}\r\n                                    {/*    />*/}\r\n                                    {/*    payMetod_1*/}\r\n                                    {/*</label>*/}\r\n                                    {/*<label htmlFor=\"payMetod_2\">*/}\r\n                                    {/*    <input type=\"radio\" id='payMetod_2' name=\"payMetod\" required*/}\r\n                                    {/*           className=\"input\" value=\"payMetod_2\"*/}\r\n                                    {/*           onChange={event => {*/}\r\n                                    {/*               setPayMetodValue(event.target.value)*/}\r\n                                    {/*               console.log('payMetodValue2', event.target.value)*/}\r\n                                    {/*           }}*/}\r\n                                    {/*    />*/}\r\n                                    {/*    payMetod_2*/}\r\n                                    {/*</label>*/}\r\n\r\n                                </div>\r\n                                <div className=\"text-center\">\r\n                                    <button className=\"btn style-3 w100\">{loading ? ( 'Отправка...' ) : ( 'подтвердить заказ' ) } </button>\r\n                                </div>\r\n                            </form>\r\n\r\n                            <div className=\"d-none\">\r\n                                {data &&\r\n                                <>\r\n                                    {console.log('form send ', data)}\r\n                                    data.createOrder.orderId && (\r\n                                    { typeof window !== 'undefined' &&  localStorage.setItem('lastOrder', JSON.stringify(data) ) }\r\n                                    { typeof window !== 'undefined' &&  localStorage.setItem('AddCart', '' ) }\r\n                                    { navigate('/order') }\r\n                                    )\r\n\r\n                                    {/*<pre>{JSON.stringify(data, null, 4)}</pre>*/}\r\n                                </>\r\n                                }\r\n                            </div>\r\n\r\n                        </React.Fragment>\r\n                    )}\r\n                </Mutation>\r\n\r\n                <div className=\"text text-center pt-4 pb-1\">\r\n                    Нажимая кнопку “оформить покупку/оплатить”, я подтверждаю согласие с условиями  <Link className=\"btn style-6\" to=\"/\"> электронного договора купли-продажи товаров  </Link>\r\n                </div>\r\n                <div className=\"text-center mt-2\">\r\n                    <button onClick={()=>props.setStep(2)} className=\"box-svg\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"10\" viewBox=\"0 0 14 10\"><g><g>\r\n                            <path fill=\"#888\" d=\"M4.997 9.663l.94-.94-3.054-3.06h10.78V4.33H2.883l3.06-3.06-.946-.94L.33 4.997z\"/></g></g></svg>\r\n                        <span className=\"btn style-6 ml-1\">Назад к доставке</span>\r\n                    </button>\r\n                </div>\r\n\r\n            </div>\r\n\r\n\r\n        </>\r\n    )\r\n\r\n}","import React, {useState} from \"react\"\r\nimport Layout from \"../components/global/layout\";\r\nimport {Link} from \"gatsby\";\r\nimport FormRegister from \"../components/checkout/FormRegister\"\r\nimport ResultPrice from \"../components/checkout/ResultPrice\"\r\nimport Payment from \"../components/checkout/payment\"\r\nimport Pay from \"../components/checkout/pay\"\r\nimport GetInfoResult from \"../components/InfoBox\";\r\nimport SEO from \"../components/global/seo\";\r\n\r\n\r\n\r\nexport default ({pageContext}) => {\r\n\r\n    const cart = typeof window !== 'undefined' &&  JSON.parse( localStorage.getItem('AddCart' ) );\r\n\r\n    const [step, setStep] = useState(2)\r\n\r\n\r\n    return (\r\n        <Layout page=\"checkout\">\r\n            <SEO title={pageContext.title} />\r\n            {/*{JSON.stringify(cart)}*/}\r\n            {\r\n                cart && cart.length>0 ? (\r\n                    <div className=\"container pt-1\">\r\n                        <div className=\"box-checkout-list row\">\r\n                            {/*<div id=\"box-checkout-list-1\" onClick={()=>checkoutList(1) } className=\"list-item col-4 \">*/}\r\n                            {/*    Вход*/}\r\n                            {/*</div>*/}\r\n                            <div id=\"box-checkout-list-2\"\r\n                                // onClick={()=>checkoutList(2) }\r\n                                 className={`list-item col ${step === 1 ?? 'active'}`}>\r\n                                Доставка\r\n                            </div>\r\n                            <div id=\"box-checkout-list-3\"\r\n                                // onClick={()=>checkoutList(3) }\r\n                                 className={`list-item col ${step === 2 ?? 'active'}`}>\r\n                                Оплата\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"box-checkout-result\">\r\n\r\n                            {/*<div id=\"box-checkout-list-1-result\" className=\" result\">*/}\r\n                            {/*    <div className=\"row\">*/}\r\n                            {/*        <div className=\"col\">*/}\r\n                            {/*            <div className=\"box-checkout-title\">*/}\r\n                            {/*                <strong>Регистрация</strong>*/}\r\n                            {/*            </div>*/}\r\n                            {/*        </div>*/}\r\n                            {/*        <div className=\"col-auto\">*/}\r\n                            {/*            <Link className=\"btn style-6\" to=\"/user\">У меня есть аккаунт</Link>*/}\r\n                            {/*        </div>*/}\r\n                            {/*        <div className=\"col-12\">*/}\r\n                            {/*            <FormRegister />*/}\r\n                            {/*        </div>*/}\r\n                            {/*    </div>*/}\r\n                            {/*</div>*/}\r\n                            {step === 2 && <div id=\"box-checkout-list-2-result\" className=\"result active\">\r\n                                <div className=\"col-12\">\r\n                                    <Payment setStep={setStep} />\r\n                                </div>\r\n                            </div>\r\n                            }\r\n                            {step === 3 &&\r\n                            <div id=\"box-checkout-list-3-result\" className=\"result active\">\r\n                                <div className=\"box-checkout-title text-center pt-3\">\r\n                                    <strong>Оплата</strong>\r\n                                </div>\r\n                                <Pay setStep={setStep}/>\r\n                            </div>\r\n                            }\r\n\r\n\r\n                        </div>\r\n                        <ResultPrice />\r\n                    </div>\r\n                ) : (\r\n                    <GetInfoResult info=\"save\" title=\"Корзина пустая\" text=\"Вы не добавили в корзину ни одного товара\" classBox='h-100 ' homeBtn={true} />\r\n                )\r\n            }\r\n        </Layout>\r\n\r\n\r\n    )\r\n};"],"sourceRoot":""}